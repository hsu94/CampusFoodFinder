#include "Graphics.h"

#define XRES 800
#define YRES 480

/*************************************************************************************************
** This function draws a single ASCII character at the coord and colour specified
** it optionally ERASES the background colour pixels to the background colour
** This means you can use this to erase characters
**
** e.g. writing a space character with Erase set to true will set all pixels in the
** character to the background colour
**
*************************************************************************************************/

const unsigned char Font5x7[95][7] = {
								{0x0,0x0,0x0,0x0,0x0,0x0,0x0},	 		// ' '
								{0x4,0x4,0x4,0x4,0x0,0x0,0x4}, 			// '!'
								{0xa,0xa,0xa,0x0,0x0,0x0,0x0}, 			// '"'
								{0xa,0xa,0x1f,0xa,0x1f,0xa,0xa}, 		// '#'
								{0x4,0xf,0x14,0xe,0x5,0x1e,0x4}, 		// '$'
								{0x18,0x19,0x2,0x4,0x8,0x13,0x13}, 		// '%'
								{0xc,0x12,0x14,0x8,0x15,0x12,0xd}, 		// '&'
								{0xc,0x4,0x8,0x0,0x0,0x0,0x0}, 			// '''
								{0x1,0x2,0x4,0x4,0x4,0x2,0x1}, 			// '('
								{0x8,0x4,0x2,0x2,0x2,0x4,0x8},			// ')'
								{0x0,0x4,0x15,0xe,0x15,0x4,0x0}, 		// '*'
								{0x0,0x4,0x4,0x1f,0x4,0x4,0x0}, 		// '+'
								{0x0,0x0,0x0,0x0,0xc,0x4,0x8}, 			// ','
								{0x0,0x0,0x0,0x1f,0x0,0x0,0x0},			// '-'
								{0,0,0,0,0,0x6,0x6}, 					// '.'
								{0,0x1,0x2,0x4,0x8,0x10,0}, 			// '/'

								{0xe,0x11,0x13,0x15,0x19,0x11,0xe},	 	// '0'
								{0x4,0xc,0x4,0x4,0x4,0x4,0xe},		 	// '1'
								{0xe,0x11,0x1,0x2,0x4,0x8,0x1f}, 		// '2'
								{0x1f,0x2,0x4,0x2,0x1,0x11,0xe},	 	// '3'
								{0x2,0x6,0xa,0x12,0x1f,0x2,0x2}, 		// '4'
								{0x1f,0x10,0x1e,0x1,0x1,0x11,0xe}, 		// '5'
								{0x6,0x8,0x10,0x1e,0x11,0x11,0xe},	 	// '6'
								{0x1f,0x1,0x2,0x4,0x8,0x8,0x8},		 	// '7'
								{0xe,0x11,0x11,0xe,0x11,0x11,0xe},	 	// '8'
								{0xe,0x11,0x11,0xe,0x1,0x2,0xc},		// '9'
								{0x0,0xc,0xc,0x0,0xc,0xc,0x0}, 			// ':'
								{0x0,0xc,0xc,0x0,0xc,0x4,0x8},		 	// ';'
								{0x2,0x4,0x8,0x10,0x8,0x4,0x2},		 	// '<'
								{0x0,0x0,0x1f,0x0,0x1f,0x0,0x0},		// '='
								{0x8,0x4,0x2,0x1,0x2,0x4,0x8}, 			// '>'
								{0xe,0x11,0x1,0x2,0x4,0x0,0x4}, 		// '?'

								{0xe,0x11,0x1,0xd,0x15,0x15,0xe},	 	// '@'
								{0xe,0x11,0x11,0x1f,0x11,0x11,0x11}, 	// 'A'
								{0x1e,0x11,0x11,0x1e,0x11,0x11,0x1e}, 	// 'B'
								{0xe,0x11,0x10,0x10,0x10,0x11,0xe}, 	// 'C'
								{0x1c,0x12,0x11,0x11,0x11,0x12,0x1c}, 	// 'D'
								{0x1f,0x10,0x10,0x1e,0x10,0x10,0x1f}, 	// 'E'
								{0x1f,0x10,0x10,0x1e,0x10,0x10,0x10}, 	// 'F'
								{0xe,0x11,0x10,0x17,0x11,0x11,0xe}, 	// 'G'
								{0x11,0x11,0x11,0x1f,0x11,0x11,0x11}, 	// 'H'
								{0x1f,0x4,0x4,0x4,0x4,0x4,0x1f},		// 'I'
								{0xf,0x2,0x2,0x2,0x2,0x12,0xc}, 		// 'J'
								{0x11,0x12,0x14,0x18,0x14,0x12,0x11}, 	// 'K'
								{0x10,0x10,0x10,0x10,0x10,0x10,0x1F}, 	// 'L'
								{0x11,0x1B,0x15,0x15,0x11,0x11,0x11},	// 'M'
								{0x11,0x11,0x19,0x15,0x13,0x11,0x11}, 	// 'N'
								{0xe,0x11,0x11,0x11,0x11,0x11,0xe}, 	// 'O'
								{0x1e,0x11,0x11,0x1e,0x10,0x10,0x10}, 	// 'P'
								{0xe,0x11,0x11,0x11,0x15,0x12,0xd}, 	// 'Q'
								{0x1e,0x11,0x11,0x1e,0x14,0x12,0x11}, 	// 'R'
								{0xf,0x10,0x10,0xe,0x1,0x1,0x1e}, 		// 'S'
								{0x1f,0x4,0x4,0x4,0x4,0x4,0x4},		 	// 'T'
								{0x11,0x11,0x11,0x11,0x11,0x11,0xe}, 	// 'U'
								{0x11,0x11,0x11,0x11,0x11,0xa,0x4},		// 'V'
								{0x11,0x11,0x11,0x11,0x15,0x15,0xa},	// 'W'
								{0x11,0x11,0xa,0x4,0xa,0x11,0x11},	 	// 'X'
								{0x11,0x11,0x11,0xa,0x4,0x4,0x4},	 	// 'Y'
								{0x1f,0x1,0x2,0x4,0x8,0x10,0x1f},		// 'Z'
								{0xe,8,8,8,8,8,0xe},	 				// '['
								{0,0x10,0x8,0x4,0x2,0x1,0},			 	// '\'
								{0xe,0x2,0x2,0x2,0x2,0x2,0xe},		 	// ']'
								{4,0xa,0x11,0,0,0,0}, 					// '^'
								{0,0,0,0,0,0,0x1f},					 	// '_'
								{0x8,0x4,0x2,0,0,0,0},	 				// '`'
								{0,0,0xe,0x1,0xf,0x11,0xf},			 	// 'a'
								{0x10,0x10,0x10,0x1e,0x11,0x11,0x1e}, 	// 'b'
								{0,0,0xf,0x10,0x10,0x10, 0xf}, 			// 'c'
								{0x1,0x1,0x1,0xf,0x11,0x11,0xf},	 	// 'd'
								{0,0,0xe,0x11,0x1f,0x10,0xe},		 	// 'e'
								{0x2,0x5,0x4,0xe,0x4,0x4,0x4}, 			// 'f'
								{0,0,0xf,0x11,0xf,0x1,0x1e},		 	// 'g'
								{0x10,0x10,0x10,0x1e,0x11,0x11,0x11}, 	// 'h'
								{0x0,0x4,0x0,0x4,0x4,0x4,0x4},			// 'i'
								{0x2,0,0x2,0x2,0x2,0x12,0xc}, 			// 'j'
								{0x8,0x8,0x9,0xa,0xc,0xa,0x9},		 	// 'k'
								{0xc,0x4,0x4,0x4,0x4,0x4,0xe},		 	// 'l'
								{0,0,0x1b,0x15,0x15,0x15,0x11},			// 'm'
								{0x0,0x0,0x16,0x19,0x11,0x11,0x11}, 	// 'n'
								{0x0,0x0,0xe,0x11,0x11,0x11,0xe},	 	// 'o'
								{0x0,0x0,0x1e,0x11,0x1e,0x10,0x10}, 	// 'p'
								{0x0,0x0,0xf,0x11,0xf,0x1,0x1},		 	// 'q'
								{0x0,0x0,0x16,0x19,0x10,0x10,0x10}, 	// 'r'
								{0x0,0x0,0xf,0x10,0xe,0x1,0x1e}, 		// 's'
								{0x4,0x4,0x1f,0x4,0x4,0x5,0x2},		 	// 't'
								{0x0,0x0,0x11,0x11,0x11,0x11,0xe}, 		// 'u'
								{0x0,0x0,0x11,0x11,0x11,0xa,0x4},		// 'v'
								{0x0,0x0,0x11,0x11,0x15,0x15,0xa},		// 'w'
								{0x0,0x0,0x11,0xa,0x4,0xa,0x11},	 	// 'x'
								{0x0,0x0,0x11,0xa,0x4,0x4,0x8},		 	// 'y'
								{0x0,0x0,0x1f,0x2,0x4,0x8,0x1f},		// 'z'
								{0x3,0x4,0x4,0x8,0x4,0x4,0x3},			// '{'
								{0x4,0x4,0x4,0x0,0x4,0x4,0x4},		 	// '|'
								{0x18,0x4,0x4,0x3,0x4,0x4,0x18},	 	// '}'
								{0,0x8,0x15,2,0,0,0},					// '~'
							   } ;

#define TRUE 1
#define XRES 800
#define YRES 480

void OutGraphicsCharFont1(int x, int y, int fontcolour, int backgroundcolour, int c, int Erase)
{
// using register variables (as opposed to stack based ones) may make execution faster
// depends on compiler and CPU

	register int row, column, theX = x, theY = y ;
	register int pixels ;
	register char theColour = fontcolour  ;
	register int BitMask, theC = c ;

// if x,y coord off edge of screen don't bother
// XRES and YRES are #defined to be 800 and 480 respectively
    if(((short)(x) > (short)(XRES-1)) || ((short)(y) > (short)(YRES-1)))
        return ;


// if printable character subtract hex 20
	if(((short)(theC) >= (short)(' ')) && ((short)(theC) <= (short)('~'))) {
		theC = theC - 0x20 ;
		for(row = 0; (char)(row) < (char)(7); row ++)	{

// get the bit pattern for row 0 of the character from the software font
			pixels = Font5x7[theC][row] ;
			BitMask = 16 ;

			for(column = 0; (char)(column) < (char)(5); column ++)	{

// if a pixel in the character display it
				if((pixels & BitMask))
					WriteAPixel(theX+column, theY+row, theColour) ;

				else {
					if(Erase == 1)

// if pixel is part of background (not part of character)
// erase the background to value of variable BackGroundColour

						WriteAPixel(theX+column, theY+row, backgroundcolour) ;
				}
				BitMask = BitMask >> 1 ;
			}
		}
	}
}
